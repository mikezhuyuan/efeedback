<!doctype html>
<html>
<head>
<style>
#source > div{
	height:48px;width:48px;padding:0;margin:0;position:absolute;
}

.icon{
	font-size:48px;line-height:48px;
}

.dialog{
	position:absolute;top:40px;border:1px solid #ccc; width:256px; min-height:64px;padding:4px
}

.question{
	overflow:hidden;font-size:12px;width:250px;height:18px;line-height:18px;resize: none;
}

</style>
<script src="jquery.js" type="text/javascript"></script>
</head>

<body>
<div id="source">
	<div id="questionTemplate" style="">
		<span class="icon" style="">✎</span>
		<div class="dialog" style="">
			<textarea class="question" style=""></textarea>
			<div style="text-align:right">
				<button class="ask">Ask</button>
			</div>
			<div class="session">
				<div style="border-top:1px solid #e3efea;margin:2px;">
				<div style="float:left;width:32px;height:32px;font-size:32px;text-align:center;line-height:32px">
					☺
				</div>
				<div style="margin-left:40px;">Could you give me an example how to make a sentence with 'work off'</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div id="target" style='position:relative'>

</div>
<script>
var keys = [
'background-image',
'background-origin',
/*'background-size',*/
'border-spacing',
'border',
'border-image-source',
'bottom',
'clear',
'color',
'content',
'cursor',
'direction',
'float',
'font-family',
'font-size',
'font-style',
'font-variant',
'font-weight',
'height',
'left',
'letter-spacing',
'line-height',
'margin',
'max-height',
'max-width',
'min-height',
'min-width',
'outline',
'overflow-wrap',
'padding',
'position',
'quotes',
'right',
'text-decoration',
'text-indent',
'text-overflow',
'text-shadow',
'text-transform',
'top',
'unicode-bidi',
'visibility',
'white-space',
'width',
'word-break',
'word-spacing',
'z-index',
'border-top-left-radius',
'border-top-right-radius',
'border-bottom-left-radius',
'border-bottom-right-radius',
'box-shadow',
'-webkit-box-shadow',
'box-sizing',
'opacity',
'background-color',
'background-attachment',
'display',
'overflow',
'text-align',
'widows',
'background-position',
'background-repeat'
];
function htmlTree(root, traverse){
	if (root.nodeType === 1) {
		traverse(root);
	}    
	if (root.hasChildNodes()) {       
		var child = root.firstChild;    
		while(child){         
			if (child.nodeType === 1) {        
				htmlTree(child, traverse);
			}
			child = child.nextSibling;
		}
	}
}

var root = document.getElementById('questionTemplate');

htmlTree(root, function(node){
	var style = window.getComputedStyle(node, null);
	var sbuf = '';
	for(var i=0;i<keys.length;i++){
		sbuf += keys[i] + ':' + style.getPropertyValue(keys[i]) + ';';
	}
	var output = node.getAttribute('style') || '';
	node.setAttribute('style', output + sbuf);
});
root.parentElement.removeChild(root);
document.getElementById('target').innerHTML = root.outerHTML;
//document.getElementById('target').style.left = '500px';
</script>
</body>
</html>